{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user within the Smart Digital Campus platform.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user."
        },
        "email": {
          "type": "string",
          "description": "User's email address.",
          "format": "email"
        },
        "displayName": {
          "type": "string",
          "description": "User's display name."
        },
        "role": {
          "type": "string",
          "description": "User's role within the system (e.g., 'student', 'teacher', 'admin', 'parent')."
        },
        "photoURL": {
          "type": "string",
          "description": "URL of the user's profile picture.",
          "format": "uri"
        },
        "points": {
          "type": "number",
          "description": "Gamification points for the user."
        },
        "houseId": {
          "type": "string",
          "description": "ID of the house the user belongs to."
        }
      },
      "required": [
        "id",
        "email",
        "displayName",
        "role"
      ]
    },
    "UserProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserProfile",
      "type": "object",
      "description": "Detailed profile information for a user.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user profile, should match the user's UID."
        },
        "jurusan": {
          "type": "string",
          "description": "User's major or field of study."
        },
        "kelas": {
          "type": "string",
          "description": "User's class or grade level."
        },
        "houseId": {
          "type": "string",
          "description": "Reference to House collection ID."
        },
        "points": {
          "type": "number",
          "description": "Gamification points earned by the user."
        },
        "unlockedSkills": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "List of skill IDs that the user has unlocked."
        }
      },
      "required": [
        "id"
      ]
    },
    "Course": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Course",
      "type": "object",
      "description": "Represents a course or subject offered within the platform.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the course."
        },
        "name": {
          "type": "string",
          "description": "Name of the course."
        },
        "teacherId": {
          "type": "string",
          "description": "Reference to User who is teaching the course. (Relationship: User 1:N Course)"
        },
        "studentIds": {
          "type": "array",
          "description": "References to Users enrolled in the course. (Relationship: Course 1:N User)",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "name",
        "teacherId"
      ]
    },
    "Project": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Project",
      "type": "object",
      "description": "Represents a student project or assignment.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the project."
        },
        "title": {
          "type": "string",
          "description": "Title of the project."
        },
        "description": {
          "type": "string",
          "description": "Description of the project."
        },
        "authorId": {
          "type": "string",
          "description": "Reference to User who authored the project. (Relationship: User 1:N Project)"
        },
        "authorName": {
          "type": "string",
          "description": "Name of the author (denormalized)."
        },
        "authorAvatar": {
          "type": "string",
          "description": "URL of the author's avatar (denormalized).",
          "format": "uri"
        },
        "files": {
          "type": "array",
          "description": "Links to files stored in Firebase Storage.",
          "items": {
            "type": "string"
          }
        },
        "collaboratorIds": {
          "type": "array",
          "description": "References to Users collaborating on the project. (Relationship: Project 1:N User)",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "title",
        "authorId"
      ]
    },
    "PpdbApplication": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "PpdbApplication",
      "type": "object",
      "description": "Represents an application for student admission (PPDB).",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the PPDB application."
        },
        "fullName": {
          "type": "string",
          "description": "Full name of the applicant."
        },
        "status": {
          "type": "string",
          "description": "Status of the application (e.g., 'pending', 'verified')."
        }
      },
      "required": [
        "id",
        "fullName",
        "status"
      ]
    },
    "Announcement": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Announcement",
      "type": "object",
      "description": "Represents an announcement or notification.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the announcement."
        },
        "title": {
          "type": "string",
          "description": "Title of the announcement."
        },
        "content": {
          "type": "string",
          "description": "Content of the announcement."
        },
        "targetAudience": {
          "type": "array",
          "description": "Target audience for the announcement (e.g., ['student', 'teacher']).",
          "items": {
            "type": "string"
          }
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp of when the announcement was created.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "title",
        "content"
      ]
    },
    "House": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "House",
      "type": "object",
      "description": "Represents a house within the gamified house system.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the house."
        },
        "name": {
          "type": "string",
          "description": "Name of the house."
        },
        "totalPoints": {
          "type": "number",
          "description": "Total points earned by the house."
        },
        "emblemUrl": {
          "type": "string",
          "description": "URL of the house emblem image."
        }
      },
      "required": [
        "id",
        "name",
        "totalPoints"
      ]
    },
    "WellBeingCheckIn": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "WellBeingCheckIn",
      "type": "object",
      "description": "Represents a student's well-being check-in record.",
      "properties": {
        "mood": {
          "type": "number",
          "description": "Student's mood rating (e.g., 1-5)."
        },
        "timestamp": {
          "type": "string",
          "description": "Timestamp of when the check-in was recorded.",
          "format": "date-time"
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N WellBeingCheckIn)"
        }
      },
      "required": [
        "mood",
        "timestamp",
        "userId"
      ]
    },
    "SkillTreeTier": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "SkillTreeTier",
      "type": "object",
      "description": "Represents a tier within a skill tree.",
      "properties": {
        "name": { "type": "string" },
        "order": { "type": "number" },
        "skills": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "id": { "type": "string" },
              "name": { "type": "string" },
              "description": { "type": "string" }
            },
            "required": ["id", "name", "description"]
          }
        }
      },
      "required": ["name", "order", "skills"]
    },
    "Resource": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Resource",
      "description": "Represents a well-being resource.",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "type": { "type": "string", "enum": ["Video", "Artikel", "Podcast"] },
        "title": { "type": "string" },
        "source": { "type": "string" },
        "imageId": { "type": "string" }
      },
      "required": ["id", "type", "title", "source", "imageId"]
    },
     "LearningTopic": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "LearningTopic",
      "description": "Represents a topic available for the AI Tutor.",
      "type": "object",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the topic (e.g., 'pemrograman-web')." },
        "label": { "type": "string", "description": "Display name for the topic (e.g., 'Pemrograman Web')." },
        "order": { "type": "number", "description": "Order for displaying the topic." }
      },
      "required": ["id", "label", "order"]
    },
    "QuizResult": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "QuizResult",
      "description": "Represents the result of a diagnostic quiz for a specific topic and user.",
      "type": "object",
      "properties": {
        "userId": { "type": "string", "description": "The ID of the user who took the quiz." },
        "topicId": { "type": "string", "description": "The ID of the learning topic." },
        "results": {
          "type": "object",
          "description": "An object containing question IDs and scores.",
          "additionalProperties": { "type": "number" }
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp when the quiz was taken."
        }
      },
      "required": ["userId", "topicId", "results", "createdAt"]
    }
  },
  "auth": {
    "providers": [
      "google.com",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Collection for all users. User documents are secured via path-based rules, ensuring a user can only access their own document. This collection is readable by all signed-in users for leaderboard purposes.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/profile/{profileId}",
        "definition": {
          "entityName": "UserProfile",
          "schema": {
            "$ref": "#/backend/entities/UserProfile"
          },
          "description": "Subcollection for user profiles, nested under the users collection. Read/write access is limited to the user themselves.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user."
            },
            {
               "name": "profileId",
               "description": "Should be the same as userId for a 1:1 relationship."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/wellBeing/{wellBeingId}",
        "definition": {
          "entityName": "WellBeingCheckIn",
          "schema": {
            "$ref": "#/backend/entities/WellBeingCheckIn"
          },
          "description": "Subcollection for user well-being check-ins. Access is restricted to the user who owns the check-in data.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user."
            },
            {
              "name": "wellBeingId",
              "description": "The unique identifier for the well-being check-in."
            }
          ]
        }
      },
      {
        "path": "/courses/{courseId}",
        "definition": {
          "entityName": "Course",
          "schema": {
            "$ref": "#/backend/entities/Course"
          },
          "description": "Collection for courses. Teachers can manage their courses, and students can access courses they are enrolled in.",
          "params": [
            {
              "name": "courseId",
              "description": "The unique identifier for the course."
            }
          ]
        }
      },
      {
        "path": "/projects/{projectId}",
        "definition": {
          "entityName": "Project",
          "schema": {
            "$ref": "#/backend/entities/Project"
          },
          "description": "Collection for student projects. Only the author and collaborators can access/modify.",
          "params": [
            {
              "name": "projectId",
              "description": "The unique identifier for the project."
            }
          ]
        }
      },
      {
        "path": "/announcements/{announcementId}",
        "definition": {
          "entityName": "Announcement",
          "schema": {
            "$ref": "#/backend/entities/Announcement"
          },
          "description": "Collection for announcements. Publicly readable.",
          "params": [
            {
              "name": "announcementId",
              "description": "The unique identifier for the announcement."
            }
          ]
        }
      },
      {
        "path": "/houses/{houseId}",
        "definition": {
          "entityName": "House",
          "schema": {
            "$ref": "#/backend/entities/House"
          },
          "description": "Collection for houses. Readable by all signed-in users.",
          "params": [
            {
              "name": "houseId",
              "description": "The unique identifier for the house."
            }
          ]
        }
      },
      {
        "path": "/skillTrees/{treeId}/tiers/{tierId}",
        "definition": {
          "entityName": "SkillTreeTier",
          "schema": {
            "$ref": "#/backend/entities/SkillTreeTier"
          },
          "description": "Collection of tiers for a specific skill tree. Readable by all signed-in users.",
          "params": [
            {
              "name": "treeId",
              "description": "The ID of the skill tree (e.g., 'tkj')."
            },
            {
              "name": "tierId",
              "description": "The unique identifier for the tier."
            }
          ]
        }
      },
      {
        "path": "/resources/{resourceId}",
        "definition": {
          "entityName": "Resource",
          "schema": {
            "$ref": "#/backend/entities/Resource"
          },
          "description": "Collection for well-being resources. Publicly readable.",
          "params": [
            {
              "name": "resourceId",
              "description": "The unique identifier for the resource."
            }
          ]
        }
      },
      {
        "path": "/learningTopics/{topicId}",
        "definition": {
          "entityName": "LearningTopic",
          "schema": { "$ref": "#/backend/entities/LearningTopic" },
          "description": "Collection for AI Tutor learning topics. Readable by all signed-in users.",
          "params": [
            {
              "name": "topicId",
              "description": "The unique identifier for the learning topic."
            }
          ]
        }
      },
      {
        "path": "/quizResults/{resultId}",
        "definition": {
          "entityName": "QuizResult",
          "schema": { "$ref": "#/backend/entities/QuizResult" },
          "description": "Collection for user quiz results. Users can only read and write their own results.",
          "params": [
            {
              "name": "resultId",
              "description": "The unique identifier for the quiz result."
            }
          ]
        }
      }
    ]
  }
}

    